import{_ as e,c as r,a1 as o,o as t}from"./chunks/framework.CaTmtVF5.js";const p=JSON.parse('{"title":"更新日志","description":"","frontmatter":{},"headers":[],"relativePath":"changelog.md","filePath":"changelog.md"}'),l={name:"changelog.md"};function i(n,a,h,s,d,c){return t(),r("div",null,a[0]||(a[0]=[o(`<h1 id="更新日志" tabindex="-1">更新日志 <a class="header-anchor" href="#更新日志" aria-label="Permalink to &quot;更新日志&quot;">​</a></h1><hr><h1 id="_1-3-0-pre-3" tabindex="-1">1.3.0-pre.3 <a class="header-anchor" href="#_1-3-0-pre-3" aria-label="Permalink to &quot;1.3.0-pre.3&quot;">​</a></h1><p><strong>修复</strong>：修复1.2.20-pre.2重构查询代码导致使用<code>绑定</code>指令时可能无法验证SteamID的问题。</p><hr><h1 id="_1-3-0-pre-2" tabindex="-1">1.3.0-pre.2 <a class="header-anchor" href="#_1-3-0-pre-2" aria-label="Permalink to &quot;1.3.0-pre.2&quot;">​</a></h1><p><strong>修复</strong>：尝试修复<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/issues/4" target="_blank" rel="noreferrer">比赛数据解析不完整引发的报错</a>。</p><hr><h1 id="_1-3-0-pre-1" tabindex="-1">1.3.0-pre.1 <a class="header-anchor" href="#_1-3-0-pre-1" aria-label="Permalink to &quot;1.3.0-pre.1&quot;">​</a></h1><p>(英雄别名的键名修改导致在<code>1.2.20-pre.3</code>版本自定义的本地化内容丢失，如有需要请到<code>koishi/data/locales/{locale}.yml</code>或者于<code>locales</code>插件的自定义目录中查找恢复)</p><p><strong>新增</strong>：</p><ul><li>全部结构性支持<code>i18n国际化多语言</code>。（尚未全部改写完成，不过框架完成了剩下的就是堆量了）</li></ul><blockquote><p>未完成部分：日报周报、部分指令</p></blockquote><p><strong>调整</strong>：</p><ul><li>为了适配i18n改造，指令系统由原来的中文指令改为同义英文；中文指令作为别名也内置进了指令中，依然可以按照原先的方式调用。</li></ul><p><strong>改进</strong>：</p><ul><li>优化了比赛数据查询逻辑，节省了流量并稍微加快了响应速度。（相较此前每次查询比赛可节省20~22KB的流量）</li><li>查询缓存改用cache服务，优化了相关代码且更便于管理。</li></ul><blockquote><p>（需要安装cache服务插件，按照koishi提示即可。由于改用全新缓存，可能会发出群友一天内的最近一场战报，对造成的困扰在此抱歉😞）</p></blockquote><ul><li><code>查询英雄</code>图片模板优化，现在英雄属性的显示更贴近官方风格。（高仿了游戏中的血条蓝条等）</li></ul><p><strong>修复</strong>：</p><ul><li>修复一处比赛数据处理函数中的逻辑错误，导致此前<code>match_1</code>模板中参葬率运算结果不准确。</li></ul><p><strong>移除</strong>：</p><ul><li><code>查询英雄对战</code>指令暂时移除。</li></ul><blockquote><p>这个指令是草草写的，实用性不是很高。本来早有准备在stratz推出根据命石查询英雄胜率等信息时重写这个毛坯指令的，等了快一年了也没等到所以一直搁置…… 这次使用i18n重构项目，感觉这个毛坯也没必要适配i18n了索性先退场吧。</p></blockquote><h3 id="代码层面" tabindex="-1">代码层面： <a class="header-anchor" href="#代码层面" aria-label="Permalink to &quot;代码层面：&quot;">​</a></h3><p>大量的解耦与重构，并尽可能的使用TS特性，现在代码比起以前能看很多了。</p><blockquote><p>这个版本代码变动量真的很大！</p></blockquote><h3 id="文档方向" tabindex="-1">文档方向： <a class="header-anchor" href="#文档方向" aria-label="Permalink to &quot;文档方向：&quot;">​</a></h3><p><a href="https://sjtdev.github.io/koishi-plugin-dota2tracker/" target="_blank" rel="noreferrer">全新的文档</a>也在编写中，敬请期待。</p><hr><h1 id="_1-2-20-pre-3" tabindex="-1">1.2.20-pre.3 <a class="header-anchor" href="#_1-2-20-pre-3" aria-label="Permalink to &quot;1.2.20-pre.3&quot;">​</a></h1><p><strong>新增&amp;改进</strong>：重构了部分数据文件并转移至新建的<code>i18n</code>文档中，现在可以自定义 [英雄别名] 与 [位置名称] ，在 <strong>koishi侧边栏-本地化</strong> 中配置。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>本地化</span></span>
<span class="line"><span>├─ ...</span></span>
<span class="line"><span>├─ dota2tracker</span></span>
<span class="line"><span>│  ├─ heroes  #此处修改英雄别名</span></span>
<span class="line"><span>├─ ...</span></span></code></pre></div><p>顺便也支持了多语言[zh-CN(简体中文)、en-US(英文)]，目前只有前面提到的两项可被编辑（且位置名称修改暂时无效），将继续开发逐步支持更多文本内容。</p><h1 id="_1-2-20-pre-2" tabindex="-1">1.2.20-pre.2 <a class="header-anchor" href="#_1-2-20-pre-2" aria-label="Permalink to &quot;1.2.20-pre.2&quot;">​</a></h1><p><strong>改进</strong>：API查询重构为使用标准的graphql查询模式开发，为所有的查询都添加了类型支持，提升今后的开发便捷性。（用户体验无差别）<br><strong>修复</strong>：修复插件版本更新可能带来的<code>查询比赛</code>报错。（没错，就是挂在首页readme中很久的已知问题）</p><h1 id="_1-2-20-pre-1" tabindex="-1">1.2.20-pre.1 <a class="header-anchor" href="#_1-2-20-pre-1" aria-label="Permalink to &quot;1.2.20-pre.1&quot;">​</a></h1><p><strong>修复</strong>：修复此前新增的战报解析请求并没能成功发送的问题。</p><hr><h1 id="_1-2-19" tabindex="-1">1.2.19 <a class="header-anchor" href="#_1-2-19" aria-label="Permalink to &quot;1.2.19&quot;">​</a></h1><p><strong>修复</strong>：</p><ul><li>修复使用<code>绑定</code>指令时总是验证失败的问题。</li></ul><hr><h1 id="_1-2-18" tabindex="-1">1.2.18 <a class="header-anchor" href="#_1-2-18" aria-label="Permalink to &quot;1.2.18&quot;">​</a></h1><p><strong>修复</strong>：</p><ul><li>修复<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/issues/3" target="_blank" rel="noreferrer">当绑定人数大于5时无法使用的问题 与 <code>查询最近比赛</code>无法使用的问题</a>，感谢issue捉虫！</li><li>修复部分情况下<code>查询群友</code>无法使用的问题。</li></ul><hr><h1 id="_1-2-17" tabindex="-1">1.2.17 <a class="header-anchor" href="#_1-2-17" aria-label="Permalink to &quot;1.2.17&quot;">​</a></h1><p><strong>新增</strong>：</p><ul><li>新增<code>段位变动播报功能</code>，开启后每分钟检测所有已绑定玩家的段位情况，若段位变动则向所在群组发送播报信息。（查询段位的请求附加到查询最近比赛请求中，不会额外浪费API使用次数）</li></ul><blockquote><p>注：作者最近很少打dota，朋友中也没有在打天梯的，制作此功能纯属兴趣，请在使用此功能遇到问题的朋友及时发issue反馈。</p></blockquote><p><strong>改进</strong>：</p><ul><li>因（<a href="https://discord.com/channels/268890221943324677/647693746757959682/1305969679075901462" target="_blank" rel="noreferrer">STRATZ discord消息</a>）原API重新可用，战报/日报等功能代码回滚至原先更稳定的实现方式。</li><li>战报功能：在获取到新比赛时，将主动发送一次解析请求，以避免对局内所有玩家都未注册过STRATZ时比赛不会被解析的问题。</li></ul><hr><h1 id="_1-2-16-同pre-1" tabindex="-1">1.2.16 (同pre.1) <a class="header-anchor" href="#_1-2-16-同pre-1" aria-label="Permalink to &quot;1.2.16 (同pre.1)&quot;">​</a></h1><p><strong>修复</strong>：</p><ul><li>尝试修复由于STRATZ API变动导致战报与查询比赛功能失效的问题。</li></ul><hr><h1 id="_1-2-15" tabindex="-1">1.2.15 <a class="header-anchor" href="#_1-2-15" aria-label="Permalink to &quot;1.2.15&quot;">​</a></h1><p><strong>新增</strong>：</p><ul><li>添加对新英雄<code>凯</code>的支持。（战报播报、查询英雄等）</li></ul><hr><h1 id="_1-2-14" tabindex="-1">1.2.14 <a class="header-anchor" href="#_1-2-14" aria-label="Permalink to &quot;1.2.14&quot;">​</a></h1><p><strong>修复</strong>：</p><ul><li>修复插件配置中<code>周报功能</code>与<code>日报功能</code>错误地成为必须项的问题，感谢<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/issues/2" target="_blank" rel="noreferrer">issue</a>捉虫！</li></ul><hr><h1 id="_1-2-13" tabindex="-1">1.2.13 <a class="header-anchor" href="#_1-2-13" aria-label="Permalink to &quot;1.2.13&quot;">​</a></h1><p><strong>新增&amp;改进</strong>：</p><ul><li>战报模板<code>match_1</code>追加显示命石名，并调整了其他信息的显示效果以适配此改动。</li></ul><hr><h1 id="_1-2-12" tabindex="-1">1.2.12 <a class="header-anchor" href="#_1-2-12" aria-label="Permalink to &quot;1.2.12&quot;">​</a></h1><p><strong>新增&amp;改进</strong>：</p><ul><li>战报模板<code>match_2</code>追加显示命石名，并调整了其他信息的显示效果以适配此改动。</li></ul><hr><h1 id="_1-2-11" tabindex="-1">1.2.11 <a class="header-anchor" href="#_1-2-11" aria-label="Permalink to &quot;1.2.11&quot;">​</a></h1><p><strong>新增&amp;改进</strong>：</p><ul><li>对战报模板添加命石显示，微调了其他信息的显示效果以适配此改动。</li></ul><hr><h1 id="_1-2-10" tabindex="-1">1.2.10 <a class="header-anchor" href="#_1-2-10" aria-label="Permalink to &quot;1.2.10&quot;">​</a></h1><p><strong>新增</strong>：</p><ul><li>添加对新英雄<code>百戏大王</code>的支持。（战报播报、查询英雄等）</li></ul><p><strong>修复</strong>：</p><ul><li>修复<code>查询英雄</code>图片中英雄的“基础攻击间隔”显示有误的问题。</li><li>修复战报图中若玩家名有html标签会导致图片排版错乱的问题。</li><li>修复周报与日报中评分条样式不正确的问题。</li></ul><p><strong>改进</strong>：</p><ul><li>调整了总结模板和玩家信息模板中胜负字体颜色样式，使其看起来更清晰。</li><li>优化了总结模板中胜负数和胜率的样式。</li></ul><details><summary><b>1.2.10-pre更新日志</b></summary><h3 id="_1-2-10-pre-2" tabindex="-1">1.2.10-pre.2 <a class="header-anchor" href="#_1-2-10-pre-2" aria-label="Permalink to &quot;1.2.10-pre.2&quot;">​</a></h3><p><strong>改进</strong>：</p><ul><li>调整了总结模板和玩家信息模板中胜负字体颜色样式，使其看起来更清晰。</li><li>优化了总结模板中胜负数和胜率的样式。</li></ul><h3 id="_1-2-10-pre" tabindex="-1">1.2.10-pre <a class="header-anchor" href="#_1-2-10-pre" aria-label="Permalink to &quot;1.2.10-pre&quot;">​</a></h3><p><strong>修复</strong>：</p><ul><li>修复战报图中若玩家名有html标签会导致图片排版错乱的问题。</li><li>修复周报与日报中评分条样式不正确的问题。</li></ul></details><hr><h1 id="_1-2-9" tabindex="-1">1.2.9 <a class="header-anchor" href="#_1-2-9" aria-label="Permalink to &quot;1.2.9&quot;">​</a></h1><p><strong>改进</strong>：</p><ul><li>现在周报与日报改为图片版，依旧由<code>ejs</code>生成。去除配置页中周报与日报的“实验性”标识。（目前周报与日报使用同一模板，未来可能会设计数据更丰富的周报，也可能不会_(:3」∠)_</li><li>优化播报评语随机选择算法离散性，以避免此前若是有多位玩家的随机种子相近则这些玩家选择结果总是相同。</li><li>优化追踪比赛逻辑：在追踪到群友比赛后等待解析时，此前为按添加顺序等待队列中的比赛，现在修改了判断逻辑，对当前时间分钟数与等待队列的长度进行取余，周期性访问队列中每一场比赛，这样可以优先发送已解析完成的比赛而不会被早加入但迟迟未解析的比赛阻塞。</li><li>现在可在战报模板<code>match_1</code>和玩家信息模板中正确显示打野玩家的对线结果为“野区霸主”并有对应的图标，而不是跟随默认的中路对线结果。（<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/wiki/match_1" target="_blank" rel="noreferrer">wiki/match_1</a>也已更新。）</li><li><code>查询英雄</code>：命石技能的技能名栏位添加对应命石图标与背景色用于标识。</li></ul><p><strong>修复</strong>：</p><ul><li><code>查询英雄</code>：修复DOTA2 7.37版本更新后API变动导致部分英雄查询报错。</li></ul><details><summary><b>1.2.9-pre更新日志</b></summary><h3 id="_1-2-9-pre-3" tabindex="-1">1.2.9-pre.3 <a class="header-anchor" href="#_1-2-9-pre-3" aria-label="Permalink to &quot;1.2.9-pre.3&quot;">​</a></h3><p><strong>改进</strong>：</p><ul><li>尝试修改逻辑：在追踪到群友比赛后等待解析时，此前为按添加顺序等待队列中的比赛，现在修改了判断逻辑，对当前时间分钟数与等待队列的长度进行取余，周期性访问队列中每一场比赛，这样可以优先发送已解析完成的比赛而不会被早加入但迟迟未解析的比赛阻塞。</li></ul><h3 id="_1-2-9-pre-2" tabindex="-1">1.2.9-pre.2 <a class="header-anchor" href="#_1-2-9-pre-2" aria-label="Permalink to &quot;1.2.9-pre.2&quot;">​</a></h3><p><strong>改进</strong>：</p><ul><li>现在可在战报模板<code>match_1</code>和玩家信息模板中正确显示打野玩家的对线结果为“野区霸主”并有对应的图标，而不是跟随默认的中路对线结果。（<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/wiki/match_1" target="_blank" rel="noreferrer">wiki/match_1</a>也已更新。）</li></ul><h3 id="_1-2-9-pre" tabindex="-1">1.2.9-pre <a class="header-anchor" href="#_1-2-9-pre" aria-label="Permalink to &quot;1.2.9-pre&quot;">​</a></h3><p><strong>修复&amp;改进</strong>：</p><ul><li><code>查询英雄</code>：尝试修复DOTA2 7.37版本更新后API变动导致部分英雄查询报错。</li><li><code>查询英雄</code>：命石技能的技能名栏位添加对应命石图标与背景色用于标识。</li></ul></details><hr><h1 id="_1-2-8" tabindex="-1">1.2.8 <a class="header-anchor" href="#_1-2-8" aria-label="Permalink to &quot;1.2.8&quot;">​</a></h1><p><strong>新增</strong>：</p><ul><li>新增周报功能，效果等同日报。</li><li>日报与周报中新增可关闭总结中显示组合的功能。</li></ul><p><strong>改进</strong>：</p><ul><li>现在<code>查询玩家</code>与<code>查询最近比赛</code>指令可在私聊状态下使用，必须提供SteamID参数。</li><li>将战报中的播报评语由随机选取改为固定种子：比赛ID+玩家SteamID+玩家位置，确保在不同调用时刻、次数及平台下，对同一场比赛中的玩家评语保持一致。</li><li><code>查询玩家</code>指令图片中，玩家近期比赛表中未解析的场次参战率由&quot;?%&quot;改为估算值，显示为&quot;≈xx%&quot;。</li><li><code>查询英雄</code>指令图片中，由于命石带来的属性数值无法确定作用方式（增加或是替换等），去除命石属性前的“+”，请结合命石说明自行判断。（7.37版本更新带来的API变动，导致使用指令查询某些英雄报错问题，暂无法解决）</li><li>战报模板<code>match_2</code>中，现在冠绝排名数字位置更准确了。</li><li>战报模板<code>match_2</code>中，比赛段位可以显示星级了。</li></ul><details><summary>为什么未解析的比赛需要“估算”？</summary> 比赛未解析无法获取“团队击杀数”，若是将己方所有玩家的击杀数相加，则会漏掉那些由小兵、防御塔等非玩家单位击杀数；若是将敌方所有玩家的死亡数相加，又会多出送野、自杀等不应算在己方战果中的计数。<br>目前程序采用将己方所有击杀数累加的方式来估算参战率，可能会略高于实际值。 </details><details><summary><b>1.2.8-pre更新日志</b></summary><h3 id="_1-2-8-pre" tabindex="-1">1.2.8-pre <a class="header-anchor" href="#_1-2-8-pre" aria-label="Permalink to &quot;1.2.8-pre&quot;">​</a></h3><p><strong>改进</strong>：</p><ul><li>现在<code>查询玩家</code>可在私聊状态使用，必须提供SteamID参数。</li><li>将战报中的播报评语由随机选取改为固定种子：比赛ID+玩家SteamID，确保在不同调用时刻、次数及平台下，对同一场比赛中的玩家评语保持一致。</li><li><code>查询玩家</code>指令图片中，玩家近期比赛表中未解析的场次参战率由&quot;?%&quot;改为估算值，显示为&quot;≈xx%&quot;</li></ul><h5 id="pre-2" tabindex="-1">pre.2 <a class="header-anchor" href="#pre-2" aria-label="Permalink to &quot;pre.2&quot;">​</a></h5><p><strong>改进</strong>：</p><ul><li>战报模板<code>match_2</code>中，现在冠绝排名数字位置更准确了。</li><li>战报模板<code>match_2</code>中，比赛段位可以显示星级了。</li></ul></details><hr><h1 id="_1-2-7" tabindex="-1">1.2.7 <a class="header-anchor" href="#_1-2-7" aria-label="Permalink to &quot;1.2.7&quot;">​</a></h1><h5 id="于1-2-7-beta中尝试修复的功能均已正常工作-正式发布1-2-7" tabindex="-1">于1.2.7-beta中尝试修复的功能均已正常工作，正式发布1.2.7 <a class="header-anchor" href="#于1-2-7-beta中尝试修复的功能均已正常工作-正式发布1-2-7" aria-label="Permalink to &quot;于1.2.7-beta中尝试修复的功能均已正常工作，正式发布1.2.7&quot;">​</a></h5><h5 id="以下为包括beta版更新内容在内的所有改动" tabindex="-1">以下为包括beta版更新内容在内的所有改动 <a class="header-anchor" href="#以下为包括beta版更新内容在内的所有改动" aria-label="Permalink to &quot;以下为包括beta版更新内容在内的所有改动&quot;">​</a></h5><h5 id="新增" tabindex="-1"><strong>新增</strong>： <a class="header-anchor" href="#新增" aria-label="Permalink to &quot;**新增**：&quot;">​</a></h5><ul><li>可在配置页设置查询比赛与发布战报时附带stratz比赛链接、查询玩家信息时附带stratz玩家页面链接、查询英雄数据信息时附带刀塔百科对应英雄页面链接，这些选项均默认关闭。</li></ul><h5 id="修复" tabindex="-1"><strong>修复</strong>： <a class="header-anchor" href="#修复" aria-label="Permalink to &quot;**修复**：&quot;">​</a></h5><ul><li>修复当同一个steamId在多个已订阅群组中绑定时，仅会向最早绑定的群组发送战报的问题。</li><li>现在若所有玩家某项属性都为0时不会错误地将对应称号赋予玩家1，而是取消此称号赋予。（此版本前例如所有玩家治疗量都为0，玩家1会获得“奶”称号，而现在将不会有玩家获得“奶”称号）</li><li>修复无法获取群组相关信息导致的日报功能失效。</li><li>修复日报功能中统计组合有可能出现重复的问题。</li></ul><details><summary><b>1.2.7-beta更新日志</b></summary><h3 id="_1-2-7-beta" tabindex="-1">1.2.7-beta <a class="header-anchor" href="#_1-2-7-beta" aria-label="Permalink to &quot;1.2.7-beta&quot;">​</a></h3><h5 id="新增-1" tabindex="-1"><strong>新增</strong>： <a class="header-anchor" href="#新增-1" aria-label="Permalink to &quot;**新增**：&quot;">​</a></h5><ul><li>可在配置页设置发布战报时附带stratz比赛链接、查询玩家信息时附带stratz玩家页面链接，这些选项均默认关闭。</li></ul><h5 id="修复-1" tabindex="-1"><strong>修复</strong>： <a class="header-anchor" href="#修复-1" aria-label="Permalink to &quot;**修复**：&quot;">​</a></h5><ul><li>(beta测试中) 尝试修复当同一个steamId在多个已订阅群组中绑定时，仅会向最早绑定的群组发送战报的问题。</li><li>现在若所有玩家某项属性都为0时不会错误地将对应称号赋予玩家1，而是取消此称号赋予。（此版本前例如所有玩家治疗量都为0，玩家1会获得“奶”称号，而现在将不会有玩家获得“奶”称号）</li></ul><h4 id="beta-2" tabindex="-1">beta.2 <a class="header-anchor" href="#beta-2" aria-label="Permalink to &quot;beta.2&quot;">​</a></h4><p><strong>修复</strong>：尝试修复无法获取群组相关信息导致的日报功能失效。</p><h4 id="beta-3" tabindex="-1">beta.3 <a class="header-anchor" href="#beta-3" aria-label="Permalink to &quot;beta.3&quot;">​</a></h4><p><strong>修复</strong>：尝试修复日报功能中统计组合有可能出现重复的问题。</p></details><hr><h1 id="_1-2-6" tabindex="-1">1.2.6 <a class="header-anchor" href="#_1-2-6" aria-label="Permalink to &quot;1.2.6&quot;">​</a></h1><h5 id="因koishi更新至4-17-10修复了主动发送消息的函数-本插件的发送消息方式也换回之前的方案以避免可能的代码问题。-功能使用上与1-2-6-pre3版本一致" tabindex="-1">因koishi更新至4.17.10修复了主动发送消息的函数，本插件的发送消息方式也换回之前的方案以避免可能的代码问题。（功能使用上与1.2.6-pre3版本一致） <a class="header-anchor" href="#因koishi更新至4-17-10修复了主动发送消息的函数-本插件的发送消息方式也换回之前的方案以避免可能的代码问题。-功能使用上与1-2-6-pre3版本一致" aria-label="Permalink to &quot;因koishi更新至4.17.10修复了主动发送消息的函数，本插件的发送消息方式也换回之前的方案以避免可能的代码问题。（功能使用上与1.2.6-pre3版本一致）&quot;">​</a></h5><p><strong>改进&amp;修复</strong>：修复了<code>查询英雄</code>图片中 技能数值未被正确替换、全才英雄基础攻击力显示错误的问题，并优化了命石描述显示方式<br><strong>改进</strong>：调整比赛战报图片样式：解析失败时显示的“第-手”改为“第?手”<br><strong>改进</strong>：为英雄<code>艾欧</code>添加别名：[&quot;艾欧&quot;, &quot;小精灵&quot;] → [&quot;艾欧&quot;, &quot;小精灵&quot;, &quot;精灵&quot;, &quot;IO&quot;]<br><strong>修复</strong>：修复<code>查询玩家</code>图片中场次表现评分为0时显示为?的问题</p><details><summary><b>1.2.6-pre更新日志</b></summary><h3 id="_1-2-6-pre" tabindex="-1">1.2.6-pre <a class="header-anchor" href="#_1-2-6-pre" aria-label="Permalink to &quot;1.2.6-pre&quot;">​</a></h3><h5 id="因koishi尚未更新发布pre版" tabindex="-1">(因koishi尚未更新发布pre版) <a class="header-anchor" href="#因koishi尚未更新发布pre版" aria-label="Permalink to &quot;(因koishi尚未更新发布pre版)&quot;">​</a></h5><p><strong>改进&amp;修复</strong>：修复了<code>查询英雄</code>图片中 技能数值未被正确替换、全才英雄基础攻击力显示错误的问题，并优化了命石描述显示方式<br><strong>改进</strong>：调整比赛战报图片样式：解析失败时显示的“第-手”改为“第?手”<br><strong>修复</strong>：修复<code>查询玩家</code>图片中场次表现评分为0时显示为?的问题</p><h4 id="pre2" tabindex="-1">pre2 <a class="header-anchor" href="#pre2" aria-label="Permalink to &quot;pre2&quot;">​</a></h4><p><strong>改进&amp;修复</strong>：彻底完善了<code>查询英雄</code>图片中所有由命石、神杖、魔晶提供或改变的数值说明，修复命石说明中技能数值为百分数时未带百分号的问题。</p><h4 id="pre3" tabindex="-1">pre3 <a class="header-anchor" href="#pre3" aria-label="Permalink to &quot;pre3&quot;">​</a></h4><p><strong>改进&amp;修复</strong>：继续优化<code>查询英雄</code>代码结构使由命石、神杖、魔晶改变的技能属性更直观；修复某些技能数据中有旧天赋加成数据留存、导致的天赋数值未被正确填充。<br><strong>改进</strong>：为英雄<code>艾欧</code>添加别名：[&quot;艾欧&quot;, &quot;小精灵&quot;] → [&quot;艾欧&quot;, &quot;小精灵&quot;, &quot;精灵&quot;, &quot;IO&quot;]</p></details><hr><h1 id="_1-2-5" tabindex="-1">1.2.5 <a class="header-anchor" href="#_1-2-5" aria-label="Permalink to &quot;1.2.5&quot;">​</a></h1><p><strong>改进</strong>：优化<code>查询玩家</code>图片中近期战绩列表内未解析比赛的显示效果<br><strong>修复</strong>：修复<code>查询英雄</code>图片技能属性名多显示了一个冒号的问题</p><h4 id="fix" tabindex="-1">fix <a class="header-anchor" href="#fix" aria-label="Permalink to &quot;fix&quot;">​</a></h4><p><strong>修复</strong>：使用临时替代方案修复由koishi-4.17.9的bug引起的无法主动发送消息（播报战报等）,待koishi更新修复后回滚此改动。</p><h4 id="fix3" tabindex="-1">fix3 <a class="header-anchor" href="#fix3" aria-label="Permalink to &quot;fix3&quot;">​</a></h4><p><strong>修复</strong>：修复使用替代方案导致日报失效的问题。</p><hr><h1 id="_1-2-4" tabindex="-1">1.2.4 <a class="header-anchor" href="#_1-2-4" aria-label="Permalink to &quot;1.2.4&quot;">​</a></h1><p><strong>修复</strong>：修正调用help指令时本插件某些指令的说明错误<br><strong>修复</strong>：修复<code>取消订阅</code>指令失效的问题</p><hr><h1 id="_1-2-3" tabindex="-1">1.2.3 <a class="header-anchor" href="#_1-2-3" aria-label="Permalink to &quot;1.2.3&quot;">​</a></h1><p><strong>修复</strong>：修复了比赛战报图片中称号<code>摸</code>判定不正确的问题<br><strong>改进</strong>：微调了比赛战报图片模板<code>match_2</code>中称号的显示样式</p><hr><h1 id="_1-2-2" tabindex="-1">1.2.2 <a class="header-anchor" href="#_1-2-2" aria-label="Permalink to &quot;1.2.2&quot;">​</a></h1><p><strong>移除</strong>：取消<code>查询英雄</code>的缓存功能，原因为valve的API返回的数据可能包含未本地化的字段（例如这次的7.36b更新后获取到的很多改动后技能说明暂时都是英文），这些数据无法根据版本判断是否需要更新缓存。<br><strong>修复</strong>：修复了<code>查询英雄</code>图片中某些命石提供技能可能被判定为先天技能的问题。</p><hr><h1 id="_1-2-1" tabindex="-1">1.2.1 <a class="header-anchor" href="#_1-2-1" aria-label="Permalink to &quot;1.2.1&quot;">​</a></h1><p><strong>改进</strong>：优化比赛战报图片中，对多个同种物品（例如双护腕双挂件一类）的出装时间显示进行优化，原先都将显示为最后一件此种物品的购买时间，现在可以显示不同的时间。</p><blockquote><p>从第一件购买时间算起，例如火枪于1:00 2:00 3:00购买了三个系带，游戏结束前卖出其中之一，则剩余两个则显示为1:00 2:00</p></blockquote><p><strong>改进</strong>：出于实用性考虑，比赛战报图片中将不再显示辅助道具的购买时间。</p><hr><h1 id="_1-2-0" tabindex="-1">1.2.0 <a class="header-anchor" href="#_1-2-0" aria-label="Permalink to &quot;1.2.0&quot;">​</a></h1><p><strong>改进</strong>：对<code>查询英雄</code>模板代码进行了调整与部分重写，完成7.36版本的英雄数据匹配，现在可正常使用。</p><blockquote><p>（人话说就是先天技能和命石适配完成了）</p></blockquote><p><strong>移除</strong>：因<code>查询英雄</code>指令已适配7.36版本，<code>7.36</code>指令退役。（删除）</p><h4 id="hotfix" tabindex="-1">hotfix <a class="header-anchor" href="#hotfix" aria-label="Permalink to &quot;hotfix&quot;">​</a></h4><p><strong>修复</strong>：删除一些留存的测试用代码</p><hr><h1 id="_1-1-10" tabindex="-1">1.1.10 <a class="header-anchor" href="#_1-1-10" aria-label="Permalink to &quot;1.1.10&quot;">​</a></h1><p><strong>修复</strong>：修复<code>7.36</code>指令因DOTA2官网的cdn链接变动导致获取失败的问题，并优化了加载速度。<br><strong>修复</strong>：修复每次在koishi重新启动后，使用指令<code>7.36</code>都会重新获取数据的问题。</p><h4 id="hotfix-1" tabindex="-1">hotfix <a class="header-anchor" href="#hotfix-1" aria-label="Permalink to &quot;hotfix&quot;">​</a></h4><p><strong>修复</strong>：修复一处编译问题导致<code>7.36</code>指令无法使用的问题</p><hr><h1 id="_1-1-9" tabindex="-1">1.1.9 <a class="header-anchor" href="#_1-1-9" aria-label="Permalink to &quot;1.1.9&quot;">​</a></h1><p><strong>新增</strong>：v1.1.6加入的功能等待解析时间现在可以配置，位于插件页配置项<code>dataParsingTimeoutMinutes</code><br><strong>修复</strong>：修复因v1.1.8修改数据获取方式导致的<code>绑定</code>指令失效<br><strong>修复</strong>：修复指令<code>查询英雄</code>报错问题（数据仍为7.35d，等待上游API更新）<br><strong>改进</strong>：兼容Discord、KOOK等频道类平台，将订阅与绑定存储时群组(guild)改为频道(channel)，对onebot(qq)类无影响（出现使用问题请联系我）</p><details><summary>若此前已在使用频道类平台……</summary> 此版本前频道类平台应该无法使用战报功能与日报功能。此版本在订阅本群与绑定玩家时将存储channelId而不是guildID，对于非频道类平台这两个值是一样的，不会造成影响。但频道类平台应该会彻底失效，解决方案只有操作数据库，将channelId填入原先guildId处（兼容原因，未修改数据库字段名[guildId]，但实际上存入的已经是channel的ID了；guildId和channelId可参考数据库表channel中的数据），或重新订阅与绑定。（若是重新订阅与绑定，不会覆盖原先存储guildId的数据，也就是说旧数据依然会存在，可根据需求选择是否删除） </details><hr><h1 id="_1-1-8" tabindex="-1">1.1.8 <a class="header-anchor" href="#_1-1-8" aria-label="Permalink to &quot;1.1.8&quot;">​</a></h1><p><strong>改进</strong>：将数据获取方式从 npm 包 <code>axios</code> 切换为 Koishi 提供的 <code>http</code> 服务，并简化了相关代码（用户体验无差别）。<br><strong>改进</strong>：为 <code>match_2</code> 模板添加了玩家小队标识（效果与 <code>match_1</code> 模板中的相同功能一致，但在显示上进行了微调）。</p><hr><h1 id="_1-1-7" tabindex="-1">1.1.7 <a class="header-anchor" href="#_1-1-7" aria-label="Permalink to &quot;1.1.7&quot;">​</a></h1><p><strong>改进</strong>：玩家信息模板中代表位置的图标替换为简约风格图标<br><strong>修复</strong>：于v1.1.5新增的<code>7.36</code>指令生成英雄改动图片时会额外产生的测试用的<code>remainingContent.html</code>文件，现已不再生成。（如果之前使用了该命令并产生了此文件，可根据需要手动删除。位于<code>koishi/node_modules/@sjtdev/koishi-plugin-dota2tracker/</code>）</p><hr><h1 id="_1-1-6" tabindex="-1">1.1.6 <a class="header-anchor" href="#_1-1-6" aria-label="Permalink to &quot;1.1.6&quot;">​</a></h1><p>由于近期stratz网站问题，比赛数据无法自动解析，导致bot会一直等待解析后的战报数据而无法发送。 <strong>新增</strong>：现在调整为比赛结束1小时后仍然未解析时将直接发出缺失部分数据的战报（缺失包括BP顺序、出装时间、英雄受到伤害等）</p><h4 id="hotfix-2" tabindex="-1">hotfix <a class="header-anchor" href="#hotfix-2" aria-label="Permalink to &quot;hotfix&quot;">​</a></h4><p><strong>修复</strong>：修复引发播报未解析比赛战报失败的一个小问题</p><hr><h1 id="_1-1-5" tabindex="-1">1.1.5 <a class="header-anchor" href="#_1-1-5" aria-label="Permalink to &quot;1.1.5&quot;">​</a></h1><p><strong>新增</strong>：为新版本7.36添加新指令<code>7.36</code><br><code>7.36 &lt;英雄ID|英雄名|英雄常用别名&gt;</code>可查询对应英雄的改动信息，未输入英雄查询参数时直接返回官网7.36更新日志链接<br> 添加<code>--refresh|-r</code>参数可强制重新获取数据，如<code>7.36 -r</code>，也可在查询时使用，如<code>7.36 敌法师 -r</code></p><hr><h1 id="_1-1-4" tabindex="-1">1.1.4 <a class="header-anchor" href="#_1-1-4" aria-label="Permalink to &quot;1.1.4&quot;">​</a></h1><p><strong>改进</strong>：完善查询玩家指定英雄的生成模板</p><hr><h1 id="_1-1-3" tabindex="-1">1.1.3 <a class="header-anchor" href="#_1-1-3" aria-label="Permalink to &quot;1.1.3&quot;">​</a></h1><p><strong>新增</strong>：新增实验性功能【日报昨日总结】，在指定时间播报昨日已订阅群组中已绑定群友的战绩（简略文字），默认关闭，可在插件配置中打开<br><code>查询玩家</code>指令新增功能，现在额外输入参数<code>--hero &lt;英雄ID|英雄名|英雄常用别名&gt;</code>可查询目标玩家指定英雄的详情（--hero可替换为-o）<br> 例如：</p><ul><li><code>查询玩家 123456789 --hero 敌法师</code></li><li><code>查询玩家 -o 敌法师</code> （仍可缺省玩家参数以自查）</li></ul><hr><h1 id="_1-1-2" tabindex="-1">1.1.2 <a class="header-anchor" href="#_1-1-2" aria-label="Permalink to &quot;1.1.2&quot;">​</a></h1><p><strong>改进</strong>：完成查询群友功能<br><strong>修复</strong>：修复玩家模板中显示NaN的部分</p><h4 id="hotfix-3" tabindex="-1">hotfix <a class="header-anchor" href="#hotfix-3" aria-label="Permalink to &quot;hotfix&quot;">​</a></h4><p><strong>修复</strong>：修复查询远古玩家账号时可能意外失败的问题<br><strong>改进</strong>：调整mvp中的控制分与[控]称号算法</p><h4 id="hotfix-2-1" tabindex="-1">hotfix.2 <a class="header-anchor" href="#hotfix-2-1" aria-label="Permalink to &quot;hotfix.2&quot;">​</a></h4><p><strong>修复</strong>：修复初次使用查询英雄指令时，技能名初始化失败导致的错误</p><h3 id="_1-1-2-beta" tabindex="-1">1.1.2-beta <a class="header-anchor" href="#_1-1-2-beta" aria-label="Permalink to &quot;1.1.2-beta&quot;">​</a></h3><p><strong>改进</strong>：为<code>查询群友</code>添加模板，还在调整布局中</p><hr><h1 id="_1-1-1" tabindex="-1">1.1.1 <a class="header-anchor" href="#_1-1-1" aria-label="Permalink to &quot;1.1.1&quot;">​</a></h1><p><strong>改进</strong>：玩家信息模板添加近25场内各个位置表现展示</p><hr><h1 id="_1-1-0" tabindex="-1">1.1.0 <a class="header-anchor" href="#_1-1-0" aria-label="Permalink to &quot;1.1.0&quot;">​</a></h1><p><strong>改进</strong>：使用ejs重写模板相关代码使其模块化，使新增模板更方便<br><strong>新增</strong>：为比赛信息添加了仿MAX+模板，效果可见<a href="https://github.com/sjtdev/koishi-plugin-dota2tracker/wiki/match_2" target="_blank" rel="noreferrer">match_2</a>，可在插件配置中切换</p>`,188)]))}const b=e(l,[["render",i]]);export{p as __pageData,b as default};
