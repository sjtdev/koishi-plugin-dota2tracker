<!DOCTYPE html>
<html lang="<%= languageTag %>">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            html {
                width: 816px;
                font-family: 'MiSans', sans-serif;
            }
            body {
                background-color: black;
                color: white;
                width: 800px;
            }

            img {
                vertical-align: middle;
            }

            p {
                margin: 0;
            }

            .wrapper {
                width: 800px;
                height: auto;
                /* border: 10px solid white; */
                border-radius: 10px;
                overflow: hidden;
            }

            .wrapper > div:not(.players) {
                border-radius: 5px;
                box-shadow: 0 0 5px #fff;
                /* border: 5px solid #6cf; */
                overflow: auto;
                margin: 5px;
                display: flex;
            }

            .players > div {
                height: 1646px;
            }

            .match_info {
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
                flex-direction: row;
                position: relative;
            }

            .match_info .flag {
                width: 100px;
                height: 100px;
                border-radius: 5px;
                /* z-index: -1; */
            }

            .match_info .flag:not(.won) {
                filter: grayscale(100%);
            }

            .match_info .rank,
            .match_info .star {
                position: absolute;
                width: 64px;
                bottom: 16px;
            }

            .match_info > p.won {
                position: absolute;
                width: 100px;
                bottom: 0;
                text-align: center;
                left: 690px;
                z-index: 1;
            }

            .match_info > p.won.radiant {
                left: 0;
            }

            .match_info .details {
                width: 590px;
                display: flex;
                flex-wrap: wrap;
                justify-content: space-around;
                align-content: space-between;
            }

            .match_info div.score {
                display: flex;
                width: 590px;
                flex-direction: row;
                align-items: baseline;
            }

            .match_info div.score .score {
                /* width: 280px; */
                flex-grow: 1;
                text-align: center;
                vertical-align: bottom;
                font-size: 32px;
            }

            .match_info div.score .time {
                line-height: 1;
                vertical-align: bottom;
            }

            .players {
                display: flex;
                /* flex-direction: row; */
            }

            .players > div {
                width: 400px;
                display: flex;
                flex-direction: column;
            }

            .player {
                width: 390px;
                border-radius: 5px;
                box-shadow: 0 0 5px #fff;
                /* border: 5px solid #6cf; */
                overflow: hidden;
                margin: 5px;
                /* display: flex; */
                flex-grow: 1;
                height: 320px;
            }

            .player > div {
                /* border: 5px solid #6cf; */
                display: flex;
                flex-direction: row;
                line-height: 24px;
            }

            .hero {
                margin-bottom: 4px;
            }

            .hero .player_avatar {
                width: 112px;
                height: 63px;
                position: relative;
                border-radius: 4px;
                flex-grow: 0;
            }

            .player.giveup .hero .player_avatar::before {
                content: "";
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-size: contain;
                background-position: center;
                background-repeat: no-repeat;
                background-image: url("data:image/png;base64,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");
            }

            .hero .player_avatar p {
                position: absolute;
                /* width: 86px; */
                /* line-height: 0; */
                line-height: 1.5;
                font-size: 10px;
                margin: 0;
            }

            .hero .player_avatar .party_line {
                height: 2px;
                top: 0;
                width: 100%;
            }

            .hero .player_avatar .party_mark {
                line-height: 1.5;
                text-align: center;
                width: 16px;
                font-size: 10px;
                top: 3px;
                left: 2px;
                background-color: rgba(0, 0, 0, 0.8);
            }

            .hero .player_avatar .party_line.party_I {
                background-color: #caffe5;
            }

            .hero .player_avatar .party_mark.party_I {
                color: #caffe5;
            }

            .hero .player_avatar .party_mark.party_I::after {
                content: "I";
            }

            .hero .player_avatar .party_line.party_II {
                background-color: #ffe484;
            }

            .hero .player_avatar .party_mark.party_II {
                color: #ffe484;
            }

            .hero .player_avatar .party_mark.party_II::after {
                content: "II";
            }

            .hero .player_avatar .party_line.party_III {
                background-color: #e19be2;
            }

            .hero .player_avatar .party_mark.party_III {
                color: #e19be2;
            }

            .hero .player_avatar .party_mark.party_III::after {
                content: "III";
            }

            .hero .player_avatar .party_line.party_IV {
                background-color: #ccdaf4;
            }

            .hero .player_avatar .party_mark.party_IV {
                color: #ccdaf4;
            }

            .hero .player_avatar .party_mark.party_IV::after {
                content: "IV";
            }

            .hero .player_avatar img {
                width: 100%;
                height: 100%;
                flex-grow: 0;
            }

            .hero .player_avatar .position {
                /* width: auto; */
                line-height: 1.2;
                text-align: right;
                top: 3px;
                right: 0;
                color: #cccccc;
                text-shadow: -1px -1px 0 rgba(0, 0, 0, 0.5), 1px -1px 0 rgba(0, 0, 0, 0.5), -1px 1px 0 rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(0, 0, 0, 0.5); /* 描边效果 */
            }

            .hero .player_avatar .position.p1::first-line {
                color: red;
            }

            .hero .player_avatar .position.p2::first-line {
                color: yellow;
            }

            .hero .player_avatar .position.p3::first-line {
                color: green;
            }

            .hero .player_avatar .level {
                right: 2px;
                bottom: 1px;
                font-size: 12px;
                color: rgba(255, 255, 255, 1);
                /* color: #cccccc; */
                text-shadow: 0 0 4px black;
            }

            .hero .player_avatar .facet {
                width: 112px;
                height: 24px;
                position: absolute;
                left: 0;
                bottom: -24px;
                display: grid;
                grid-template-columns: 24px auto;
                align-items: center;
            }
            .hero .player_avatar .facet img{
                padding: 3px;
                width: 18px;
                height: 18px;
                background-color: #4444;
            }
            .hero .player_avatar .facet span{
                display: grid;
                place-items: center;
                align-items: center;
                justify-content: center;
                height: 100%;
                width: 88px;
                position: relative;
            }
            .hero .player_avatar .facet span > * {
                box-sizing: border-box;
                padding: 0 4px;
                max-width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                font-size: 14px;
            }
            .hero > .player_avatar > .facet.Red {
                background: linear-gradient(to right, #9f3c3c, #4a2026);
            }
            .hero > .player_avatar > .facet.Yellow {
                background: linear-gradient(to right, #c8a45c, #6f3d21);
            }
            .hero > .player_avatar > .facet.Green {
                background: linear-gradient(to right, #a2b23e, #2d5a18);
            }
            .hero > .player_avatar > .facet.Blue {
                background: linear-gradient(to right, #547ea6, #2a385e);
            }
            .hero > .player_avatar > .facet.Purple {
                background: linear-gradient(to right, #675cae, #261c44);
            }
            .hero > .player_avatar > .facet.Gray {
                background: linear-gradient(to right, #adb6be, #4e5557);
            }

            .hero .player_info {
                /* width: 210px; */
                text-align: center;
                margin: 0 18px;
                flex-grow: 0;
                height: 63px;
                font-size: 15px;
                line-height: 1.5;
                width: 144px;
            }

            .hero .player_info .player_name {
                max-width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .hero .player_info .player_performance {
                text-wrap: nowrap;
            }

            .hero .player_info .networth {
                color: rgb(203, 176, 42);
            }

            .hero .player_lane {
                margin-top: 6px;
                width: 44px;
                height: 100%;
                text-align: center;
                display: flex;
                flex-direction: column;
            }

            .hero .player_lane svg {
                width: 44px;
                height: 44px;
                margin-bottom: 3px;
            }

            .hero .player_lane svg path {
                /* fill: red; */
            }

            .hero .player_lane span {
                width: 100%;
                font-size: 10px;
                line-height: 1;
            }

            .hero .player_lane.advantage svg path {
                fill: lightgreen;
            }

            .hero .player_lane.stomp svg path {
                fill: green;
            }

            .hero .player_lane.stomped svg path {
                fill: red;
            }

            .hero .player_rank {
                flex-grow: 1;
                position: relative;
            }

            .hero .player_rank .rank .medal {
                z-index: 1;
            }

            .hero .player_rank .rank .star {
                z-index: 2;
            }

            .hero .player_rank .rank p {
                z-index: 3;
            }

            .hero .player_rank div {
                height: 36px;
                width: 36px;
                top: 0;
                right: 0;
                position: absolute;
            }

            .hero .player_rank img {
                top: 0;
                right: 0;
                position: absolute;
                height: 36px;
            }

            .hero .player_rank .dotaPlusLevel {
                background-size: 100%;
                position: absolute;
                top: auto;
                bottom: 0;
            }

            .hero .player_rank p {
                font-size: 10px;
                line-height: 1;
                position: absolute;
                text-align: center;
                width: 36px;
                bottom: 0;
                /* background-color: #222; */
                /* border: black 1px solid; */
                box-sizing: border-box;
                text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000; /* 描边效果 */
            }

            .titles {
                display: block;
                margin-bottom: 4px;
                padding-left: 4px;
                height: 24px;
                margin-left: 120px;
                /* text-shadow: -1px -1px 2px #aaa, 1px -1px 2px #aaa, -1px 1px 2px #aaa, 1px 1px 2px #aaa; */ /*描边效果 */
            }

            .items {
                margin-bottom: 2px;
                position: relative;
            }

            .items > * {
                /* margin-bottom: 14px; */
                /* flex-basis: content; */
                width: 0;
            }

            .items .item {
                position: relative;
                /* margin-bottom: 8px; */
                width: 100%;
                /* width: 54px; */
                flex-grow: 1;
            }

            .item img {
                width: 100%;
            }

            .item.recipe {
                background-image: url("https://cdn.cloudflare.steamstatic.com/apps/dota2/images/dota_react/items/recipe.png");
                background-size: 100%;
            }

            .item.recipe img {
                opacity: 0.75;
                /* width: 50%; */
                transform: scale(0.6);
                transform-origin: top right;
            }

            .item .time {
                text-align: center;
                width: 100%;
                margin: 0;
                font-size: 12px;
                line-height: 1;
                position: absolute;
                /* bottom: -8px; */
                bottom: 0;
                color: #ccc;
                background-color: rgba(100, 100, 100, 0.75);
            }

            .items .items_normal {
                flex-grow: 9;
                display: flex;
                flex-wrap: wrap;
            }

            .items .items_normal .item {
                /* flex-grow: 2; */
                width: 33.33%;
            }

            .items .items_backpack {
                flex-grow: 2;
                display: flex;
                flex-direction: column;
            }

            .items .item.back {
                filter: grayscale(100%);
            }

            .items .item.neutral {
                flex-grow: 3;
                width: 0;
                background-repeat: no-repeat;
                background-size: 100%;
                background-position: center;
            }

            /* kkk */
            .player.bear .items_buffs {
                height: 73.78px;
                /* margin-bottom: 4px; */
                display: flex;
                flex-direction: row;
            }

            .player.bear .items_buffs:nth-child(3) {
                margin-bottom: 4.04px;
            }

            .player.bear .items {
                display: grid;
                height: 100%;
                flex-wrap: wrap;
                width: 250.74px;
                margin-right: 4px;
                grid-template-columns: repeat(6,1fr);
                grid-template-rows: repeat(2,40px);
            }

            .player.bear .items .item {
                flex-grow: 0;
                width: 41.79px;
                position: relative;
            }

            .player.bear .ibs .item img {
                width: 100%;
            }

            .player.bear .items .item.neutral {
                margin-left: auto;
            }

            .player.bear .buffs,
            .player.bear .support_items {
                display: flex;
                margin-left: auto;
                width: 0;
                flex-grow: 1;
                flex-direction: row;
                justify-content: flex-end;
            }

            .buffs_supportItems.slave {
                width: 0;
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .buffs_supportItems.slave > .support_items,
            .buffs_supportItems.slave > .buffs {
                flex-grow: 0;
                width: auto;
                height: 24px;
                display: flex;
                flex-direction: row;
            }

            .buffs {
                margin-bottom: 4px;
                height: 24px;
            }

            .buffs section {
                text-align: center;
            }

            .buff img,
            .support_item img {
                height: 24px;
            }

            .buffs .buff,
            .support_item {
                /* display: inline; */
                position: relative;
            }

            .buff p,
            .support_item p {
                text-align: center;
                width: 100%;
                margin: 0;
                font-size: 12px;
                line-height: 1;
                position: absolute;
                bottom: 0;
                color: #aaa;
                background-color: rgba(100, 100, 100, 0.5);
            }

            .buffs section {
                display: flex;
            }

            .player .details,
            .buffs {
                font-size: 13px;
                flex-wrap: wrap;
                /* height: 400px; */
                align-content: space-between;
                justify-content: space-between;
                flex-direction: row;
                /* justify-content: space-around; */
            }

            .player .details {
                margin-bottom: 0;
            }

            .player .details section {
                flex-grow: 1;
                text-align: center;
                margin: 0 4px;
            }

            .ban_list {
                flex-wrap: wrap;
                flex-direction: row;
            }

            .ban_list div {
                width: 79px;
                height: 44px;
                background-repeat: no-repeat;
                background-size: 100%;
                position: relative;
            }

            .ban_list div img {
                filter: grayscale(100%);
                width: 100%;
                vertical-align: middle;
            }

            .ban_list div::before {
                filter: none;
                position: absolute;
                display: block;
                /* width: 40px; */
                width: 100%;
                height: 100%;
                /* background-color: red; */
                content: "";
                z-index: 1;
                background: linear-gradient(to bottom left, transparent calc(50% - 1px), red calc(50% - 1px), black calc(50% + 1px), transparent calc(50% + 1px));
            }
            /* --------------------------------------- */
        </style>
        <script>
            window.onload = function () {
                // 查找所有具有指定类名的img元素
                var images = document.querySelectorAll(".item img");
                // 为每个元素添加onerror处理器
                images.forEach(function (image) {
                    image.onerror = function () {
                        this.onerror = null; // 防止无限循环
                        this.classList.add("unload"); // 添加类
                        this.src = "backup-image.jpg"; // 设置备用图片
                    };
                });
            };
        </script>
    </head>
    <body>
        <%  const match = data;
            let kcndcStyle = {
                kc: function (num) {
                    let red = (255 - (num * 255) / 100).toFixed(2);
                    return `rgb(255,${red},${red})`;
                },
                dc: function (num) {
                    let gray = ((50 - Math.min(num, 50)) * (255 / 50)).toFixed(2);
                    return `rgb(${gray},${gray},${gray})`;
                },
            };
        // 对线结果的图标（来自免费SVG素材网）
        const laneSVG = {
            stomp: utils.getImageUrl("lane_stomp", undefined, ImageFormat.svg),
            advantage: utils.getImageUrl("lane_victory", undefined, ImageFormat.svg),
            disadvantage: utils.getImageUrl("lane_fail", undefined, ImageFormat.svg),
            stomped: utils.getImageUrl("lane_stomped", undefined, ImageFormat.svg),
            tie: utils.getImageUrl("lane_tie", undefined, ImageFormat.svg),
            jungle: utils.getImageUrl("lane_jungle", undefined, ImageFormat.svg),
        };
         %>
        <div class="wrapper">
            <%- `
            <div class="match_info">
                <img src="${utils.getImageUrl("flag_radiant")}" alt="" class="flag radiant${match.didRadiantWin ? " won" : ""}" style="order: 1" />
                <img src="${utils.getImageUrl("flag_dire")}" alt="" class="flag dire${match.didRadiantWin ? "" : " won"}" style="order: 3" />
                <p class="won${match.didRadiantWin ? " radiant" : ""}">${$t("dota2tracker.template.won")}</p>
                <div class="details" style="order: 2">
                    <p>${$t("dota2tracker.template.match_id_")}<span class="match_id">${match.id}</span></p>
                    <p>${$t("dota2tracker.template.game_mode_")}<span class="mode">${$t("dota2tracker.template.lobby_types."+match.lobbyType) || match.lobbyType}/${$t("dota2tracker.template.game_modes."+match.gameMode) || match.gameMode}</span></p>
                    <p>${$t("dota2tracker.template.region_")}<span class="server">${$t("dota2tracker.template.regions." + match.regionId)}</span></p>
                    <p>${$t("dota2tracker.template.start_time_")}<span class="start_time">${moment(new Date(match.startDateTime * 1000))
                        .format("YYYY-MM-DD HH:mm:ss")
                        .slice(2)}</span></p>
                    <img src="${utils.getImageUrl("star_" + match.rank?.toString().split("")[1])}" alt="" class="star">
                    <img src="${utils.getImageUrl("medal_" + match.rank?.toString().split("")[0])}" alt="" class="rank">
                    <p>${$t("dota2tracker.template.end_time_")}<span class="end_time">${moment(new Date(match.endDateTime * 1000))
                        .format("YYYY-MM-DD HH:mm:ss")
                        .slice(2)}</span></p>
                    <div class="score">
                        <p class="score radiant">${match.radiant.killsCount}</p>
                        <p class="time">${utils.sec2time(match.durationSeconds)}</p>
                        <p class="score dire">${match.dire.killsCount}</p>
                    </div>
                </div>
            </div>
            ` %>
            <div class="players">
                <%- match.players.map((player) =>`
                <div class="player ${player.team}${player.hero.id == 80 ? " bear" : ""}${player.leaverStatus != "NONE" && player.leaverStatus != "DISCONNECTED" ? " giveup" : ""}" style="order:${player.position?.slice(-1)}">
                    <div class="hero">
                        <div class="player_avatar">
                            <img alt="" src="${utils.getImageUrl(player.hero.shortName, ImageType.Heroes)}" />
                            <p class="party_line${player.partyId != null ? " party_" + match.party[player.partyId] : ""}"></p>
                            <p class="party_mark${player.partyId != null ? " party_" + match.party[player.partyId] : ""}"></p>
                            <p class="position p${Math.floor(player.order / 4) + 1}">${player.isRandom ? $t("dota2tracker.template.random") : $t("dota2tracker.template.pick_order",[`<span>${player.order == null ? "?" : player.order + 1}</span>`])}<br/>${$t("dota2tracker.template.position_"+player.position?.slice(-1))??''}</p>
                            <p class="level">${player.level}</p>
                            ${player.facet ? `
                            <div class="facet ${player.facet.color}">
                                <img src="${utils.getImageUrl(player.facet.icon, ImageType.IconsFacets)}">
                                <span><p style="font-size: ${player.facet.name.length > 7 ? 10 : player.facet.name.length > 5 ? 12 : 14}px;">${player.facet.name}</p></span>
                            </div>` : ""}
                        </div>
                        <div class="player_info">
                            <summary class="player_name">${eh(player.steamAccount.name)}</summary>
                            <summary class="player_performance">
                                <span class="kda">${player.kills}/${player.deaths}/${player.assists}</span>&nbsp;&nbsp;
                                <span class="kc" style="color:${kcndcStyle.kc(player.killContribution * 100)}">${Math.floor(player.killContribution * 100)}%</span>&nbsp;&nbsp;
                                <span class="dc" style="color:${kcndcStyle.dc(player.deathContribution * 100)}">${Math.floor(player.deathContribution * 100)}%</span></summary>
                            <summary class="player_net"><span class="networth">${player.networth}</span>&emsp;<span class="score">${(player.heroDamage / player.networth)?.toFixed(2)}</span></summary>
                        </div>
                        <div class="player_lane ${player.laneResult}">
                            <span>${$t("dota2tracker.template.lane_" + player.laneResult)}</span>
                            ${laneSVG[player.laneResult]}
                        </div>
                        <div class="player_rank">
                            <div class="rank">
                                <img class="medal" src="${utils.getImageUrl(
                                    "medal_" +
                                        ((player.steamAccount.seasonLeaderboardRank
                                            ? player.steamAccount.seasonLeaderboardRank <= 100
                                                ? player.steamAccount.seasonLeaderboardRank <= 10
                                                    ? "8c"
                                                    : "8b"
                                                : player.steamAccount.seasonRank?.toString().split("")[0]
                                            : player.steamAccount.seasonRank?.toString().split("")[0]) ?? "0")
                                )}" alt="" />
                                <img class="star" src="${utils.getImageUrl("star_" + (player.steamAccount.seasonRank?.toString().split("")[1] ?? "0"))}" alt="" />
                                <p>${player.steamAccount.seasonLeaderboardRank ?? ""}</p>
                            </div>
                            <div class="dotaPlusLevel"${!player.dotaPlus ? ` style="display:none"` : ""}>
                                <img src="${utils.getImageUrl("hero_badge_" + (player.dotaPlus ? Math.ceil((player.dotaPlus?.level + 1) / 6) : 1))}" alt="" class="badge">
                                <p class="level">${player.dotaPlus?.level}</p>
                            </div>
                        </div>
                    </div>
                    <div class="titles">
                        ${player.titles.map((item) => `<span style="color: ${item.color};">${item.name}</span>`).join("&nbsp;")}
                    </div>
                    ${player.hero.id != 80 ? `
                    <div class="items">
                        <div class="items_normal">
                        ${player.items
                            .map((item) =>
                                item
                                    ? `
                            <div class="item${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                    : `
                            <div class="item" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />
                                <p class="time">--:--</p>
                            </div>`
                            )
                            .join("")}
                        </div>
                        <div class="items_backpack">
                        ${player.backpacks
                            .map((item) =>
                                item
                                    ? `
                            <div class="item back${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                    : `
                            <div class="item back" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />
                                <p class="time">--:--</p>
                            </div>`
                            )
                            .join("")}
                        </div>
                        <div class="item neutral" style="background-image: url(${utils.getImageUrl(dotaconstants.item_ids[player.neutral0Id], ImageType.Items)})"></div>
                    </div>
                    <div class="buffs">
                        <section>
                            ${player.stats?.matchPlayerBuffEvent
                                ?.map(
                                    (buff) => `
                            <div class="buff">
                                <img src="${utils.getImageUrl(dotaconstants[buff.abilityId ? "ability_ids" : "item_ids"][buff.abilityId ?? buff.itemId], buff.abilityId ? ImageType.Abilities : ImageType.Items)}" alt="" />
                                <p>${buff.stackCount ?? ""}</p>
                            </div>`
                                )
                                .join("")??""}
                        </section>
                        <section>
                            <div class="support_item"${player.supportItemsCount[30] > 0 ? "" : ' style="display:none"'}>
                                <img src="${utils.getImageUrl("gem", ImageType.Items)}" alt="" />
                                <p>${player.supportItemsCount[30]}</p>
                            </div>
                            <div class="support_item"${player.supportItemsCount[40] > 0 ? "" : ' style="display:none"'}>
                                <img src="${utils.getImageUrl("dust", ImageType.Items)}" alt="" />
                                <p>${player.supportItemsCount[40]}</p>
                            </div>
                            <div class="support_item"${player.supportItemsCount[42] > 0 ? "" : ' style="display:none"'}>
                                <img src="${utils.getImageUrl("ward_observer", ImageType.Items)}" alt="" />
                                <p>${player.supportItemsCount[42]}</p>
                            </div>
                            <div class="support_item"${player.supportItemsCount[43] > 0 ? "" : ' style="display:none"'}>
                                <img src="${utils.getImageUrl("ward_sentry", ImageType.Items)}" alt="" />
                                <p>${player.supportItemsCount[43]}</p>
                            </div>
                            <div class="support_item"${player.supportItemsCount[188] > 0 ? "" : ' style="display:none"'}>
                                <img src="${utils.getImageUrl("smoke_of_deceit", ImageType.Items)}" alt="" />
                                <p>${player.supportItemsCount[188]}</p>
                            </div>
                        </section>
                    </div>`
                                : `
                    <div class="items_buffs master">
                        <div class="items master">
                            ${player.items
                                .map((item) =>
                                    item
                                        ? `
                            <div class="item${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                        : `
                            <div class="item" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />>
                                <p class="time">--:--</p>
                            </div>`
                                )
                                .join("")}
                            ${player.backpacks
                                .map((item) =>
                                    item
                                        ? `
                            <div class="item back${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                        : `
                            <div class="item back" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />
                                <p class="time">--:--</p>
                            </div>`
                                )
                                .join("")}
                            <div class="item neutral">
                                <img src="${utils.getImageUrl(dotaconstants.item_ids[player.neutral0Id], ImageType.Items)}" alt="" />
                            </div>
                        </div>
                        <div class="buffs master">
                            ${player.stats?.matchPlayerBuffEvent
                                ?.map(
                                    (buff) => `
                            <div class="buff">
                                <img src="${utils.getImageUrl(dotaconstants[buff.abilityId ? "ability_ids" : "item_ids"][buff.abilityId ?? buff.itemId], buff.abilityId ? ImageType.Abilities : ImageType.Items)}" alt="" />
                                <p>${buff.stackCount ?? ""}</p>
                            </div>`
                                )
                                .join("")}
                        </div>
                    </div>
                    <div class="items_buffs slave">
                        <div class="items slave">
                            ${player.unitItems
                                .map((item) =>
                                    item
                                        ? `
                            <div class="item${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                        : `
                            <div class="item" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />>
                                <p class="time">--:--</p>
                            </div>`
                                )
                                .join("")}
                            ${player.unitBackpacks
                                .map((item) =>
                                    item
                                        ? `
                            <div class="item back${item.isRecipe ? " recipe" : ""}">
                                <img src="${utils.getImageUrl(item.name, ImageType.Items)}" alt="" />
                                <p class="time">${utils.sec2time(item.time)}</p>
                            </div>`
                                        : `
                            <div class="item back" style="visibility:hidden"}">
                                <img src="${utils.getImageUrl("blink", ImageType.Items)}" alt="" />
                                <p class="time">--:--</p>
                            </div>`
                                )
                                .join("")}
                            <div class="item neutral">
                                <img src="${utils.getImageUrl(dotaconstants.item_ids[player.additionalUnit.neutral0Id], ImageType.Items)}" alt="" />
                            </div>
                        </div>
                        <div class="buffs_supportItems slave">
                            <div class="buffs">
                                <!-- 无有效API获取熊灵buff -->
                            </div>
                            <div class="support_items">
                                <div class="support_item"${player.supportItemsCount[30] > 0 ? "" : ' style="display:none"'}>
                                    <img src="${utils.getImageUrl("gem", ImageType.Items)}" alt="" />
                                    <p>${player.supportItemsCount[30]}</p>
                                </div>
                                <div class="support_item"${player.supportItemsCount[40] > 0 ? "" : ' style="display:none"'}>
                                    <img src="${utils.getImageUrl("dust", ImageType.Items)}" alt="" />
                                    <p>${player.supportItemsCount[40]}</p>
                                </div>
                                <div class="support_item"${player.supportItemsCount[42] > 0 ? "" : ' style="display:none"'}>
                                    <img src="${utils.getImageUrl("ward_observer", ImageType.Items)}" alt="" />
                                    <p>${player.supportItemsCount[42]}</p>
                                </div>
                                <div class="support_item"${player.supportItemsCount[43] > 0 ? "" : ' style="display:none"'}>
                                    <img src="${utils.getImageUrl("ward_sentry", ImageType.Items)}" alt="" />
                                    <p>${player.supportItemsCount[43]}</p>
                                </div>
                                <div class="support_item"${player.supportItemsCount[188] > 0 ? "" : ' style="display:none"'}>
                                    <img src="${utils.getImageUrl("smoke_of_deceit", ImageType.Items)}" alt="" />
                                    <p>${player.supportItemsCount[188]}</p>
                                </div>
                            </div>
                        </div>
                    </div>`}
                    <div class="details">
                        <section>${$t("dota2tracker.template.hero_damage_")}<span class="hero_damage">${player.heroDamage}</span></section>
                        <section>${$t("dota2tracker.template.building_damage_")}<span class="building_damage">${player.towerDamage}</span></section>
                        <section>${$t("dota2tracker.template.damage_received_")}<span class="tak">${
                            (player.stats?.heroDamageReport?.receivedTotal.physicalDamage??0) + (player.stats?.heroDamageReport?.receivedTotal.magicalDamage??0) + (player.stats?.heroDamageReport?.receivedTotal.pureDamage??0)
                        }</span></section>
                        <section>${$t("dota2tracker.template.lasthit_")}<span class="lh">${player.numLastHits}</span>/<span class="dn">${player.numDenies}</span></section>
                        <section>${$t("dota2tracker.template.GPM/XPM_")}<span class="gpm">${player.goldPerMinute}</span>/<span class="xpm">${player.experiencePerMinute}</span></section>
                        <section>${$t("dota2tracker.template.heal_")}<span class="heal">${player.heroHealing}</span></section>
                        <section>${$t("dota2tracker.template.crowd_control_duration_")}<span class="building_damage">${((player.stats?.heroDamageReport?.dealtTotal.stunDuration ?? 0) / 100).toFixed(2)}/${((player.stats?.heroDamageReport?.dealtTotal.slowDuration ?? 0) / 100).toFixed(2)}/${(
                        (player.stats?.heroDamageReport?.dealtTotal.disableDuration ?? 0) / 100
                    ).toFixed(2)}</span>s</section>
                    </div>
                </div>`).join("") %>
            </div>
            <div class="ban_list">
                <%- (match.pickBans??[])
                .filter((hero) => !hero.isPick)
                .map((hero) => `<div class="ban_hero"><img src="${utils.getImageUrl(/^npc_dota_hero_(?<name>.+)$/.exec(dotaconstants.heroes[hero.bannedHeroId].name)[1], ImageType.Heroes)}" alt="" /></div>`)
                .join("") %>
            </div>
        </div>
    </body>
</html>
<script>
        // 获取原始的玩家容器
        const originalContainer = document.querySelector('.players');

        // 创建新的容器
        const radiantContainer = document.createElement('div');
        radiantContainer.className = 'radiant_players';

        const direContainer = document.createElement('div');
        direContainer.className = 'dire_players';

        // 获取所有玩家元素
        const players = document.querySelectorAll('.player');

        // 根据玩家类型将玩家移动到新的容器
        players.forEach(player => {
            if (player.classList.contains('radiant')) {
                radiantContainer.appendChild(player);
            } else if (player.classList.contains('dire')) {
                direContainer.appendChild(player);
            }
        });

        // 清空原始容器并添加新的分组容器
        originalContainer.innerHTML = '';
        originalContainer.appendChild(radiantContainer);
        originalContainer.appendChild(direContainer);

</script>
